# JDC Pre-Commit Code Review 插件使用教程

<div align="center">

![Plugin Logo](https://img.shields.io/badge/JDC-Pre--Commit%20Code%20Review-blue?style=for-the-badge&logo=intellij-idea)

[![JetBrains Plugin](https://img.shields.io/badge/JetBrains-插件市场-orange.svg)](https://plugins.jetbrains.com/)
[![License](https://img.shields.io/badge/许可证-Apache%202.0-blue.svg)](https://opensource.org/licenses/Apache-2.0)
[![Java](https://img.shields.io/badge/Java-8%2B-red.svg)](https://www.oracle.com/java/)

**🚀 AI驱动的智能代码审查插件，提升代码质量的最佳选择**

[功能特色](#-功能特色) • [安装指南](#-安装指南) • [快速上手](#-快速上手) • [详细使用](#-详细使用) • [常见问题](#-常见问题)

</div>

---

## 📋 插件简介

JDC Pre-Commit Code Review 是一款专为IntelliJ IDEA开发的智能代码审查插件。它利用先进的AI技术（Claude Sonnet 4）在Git提交前自动分析代码质量，帮助开发者发现潜在问题，提升代码质量。

### 🎯 核心价值

- **🤖 AI智能审查** - 基于Claude Sonnet 4的多维度代码质量分析
- **🔍 深度检测** - 发现安全漏洞、性能问题、代码风格问题
- **📊 量化评分** - 提供0-100分的代码质量评分和详细改进建议
- **🔗 Git集成** - 无缝集成Git工作流，只审查暂存区文件
- **🛡️ 安全认证** - 浏览器OAuth认证，无需在插件中输入密码

---

## ✨ 功能特色

### 🚀 智能代码审查

| 功能 | 描述 | 支持语言 |
|------|------|----------|
| **多维度分析** | 代码质量、安全性、性能、可维护性全方位检测 | Java、Kotlin、Python、JavaScript、TypeScript等 |
| **智能评分** | 0-100分量化评分系统，直观了解代码质量 | 全语言支持 |
| **详细建议** | 针对性的改进建议和最佳实践推荐 | 全语言支持 |
| **漏洞检测** | 识别潜在的安全漏洞和风险点 | 主流编程语言 |

### 🎨 用户体验

| 特性 | 描述 |
|------|------|
| **选择性审查** | 支持自定义选择要审查的文件 |
| **现代界面** | 符合IntelliJ设计规范的美观界面 |
| **实时反馈** | 实时显示分析进度和结果 |
| **快捷操作** | 丰富的键盘快捷键支持 |

### 🔧 技术特性

| 特性 | 描述 |
|------|------|
| **Git深度集成** | 自动检测Git暂存文件，只审查相关代码 |
| **智能过滤** | 自动过滤非代码文件，专注代码质量 |
| **安全认证** | OAuth浏览器认证，支持自动重新认证 |
| **错误处理** | 完善的错误处理和重试机制 |

---

## 🛠 安装指南

### 方式一：插件市场安装（推荐）

1. **打开插件市场**
   - 启动 IntelliJ IDEA
   - 进入 `文件` → `设置` → `插件`
   - 点击 `市场` 标签页

2. **搜索插件**
   - 在搜索框中输入 "JDC Pre-Commit Code Review"
   - 找到插件并点击 `安装`

3. **重启IDE**
   - 安装完成后重启 IntelliJ IDEA
   - 插件将自动激活

### 方式二：手动安装

1. **下载插件文件**
   - 从JetBrains插件市场下载插件zip文件

2. **本地安装**
   - 进入 `文件` → `设置` → `插件`
   - 点击齿轮图标 ⚙️ → `从磁盘安装插件...`
   - 选择下载的插件文件并安装

3. **重启IDE**
   - 重启 IntelliJ IDEA 完成安装

### 安装验证

安装成功后，您可以通过以下方式验证：

- 在右侧工具窗口中找到 "JDC Pre-Commit Review"
- 菜单栏 `工具` 中出现 "JDC Pre-Commit Review" 选项
- 快捷键 `Ctrl+Shift+P` 可以打开工具窗口

---

## 🚀 快速上手

### 第一步：账号登录

1. **打开工具窗口**
   - 使用快捷键 `Ctrl+Shift+P`
   - 或点击右侧工具窗口中的 "JDC Pre-Commit Review"

2. **开始登录**
   - 点击工具窗口中的 `登录` 按钮
   - 浏览器将自动打开JDC Tools授权页面

3. **完成授权**
   - 在浏览器中完成登录和授权
   - 返回IDE，插件将自动获取认证信息
   - 登录状态会自动保存，下次使用无需重新登录

### 第二步：准备代码文件

1. **添加文件到暂存区**
   ```bash
   # 添加特定文件
   git add src/main/java/MyClass.java
   
   # 添加所有修改的文件
   git add .
   
   # 添加特定目录
   git add src/main/java/
   ```

2. **确认暂存状态**
   - 使用 `git status` 确认文件已添加到暂存区
   - 插件只会审查暂存区中的代码文件

### 第三步：执行代码审查

#### 方式一：审查暂存文件（推荐）

1. **打开文件选择对话框**
   - 使用快捷键 `Ctrl+Shift+R`
   - 或在工具窗口中点击 `审查选中文件` 按钮

2. **选择要审查的文件**
   - 在弹出的对话框中查看暂存文件列表
   - 使用复选框选择要审查的文件
   - 可以使用 `全选` / `全不选` 快速操作

3. **开始审查**
   - 点击 `开始审查` 按钮
   - 等待AI分析完成

#### 方式二：审查当前文件

1. **选择文件**
   - 在编辑器中打开要审查的文件

2. **执行审查**
   - 使用快捷键 `Ctrl+Shift+F`
   - 或右键菜单选择 `工具` → `JDC Pre-Commit Review` → `审查当前文件`

### 第四步：查看审查结果

1. **结果展示**
   - 审查结果将在工具窗口中显示
   - 包含代码质量评分（0-100分）
   - 详细的问题分析和改进建议

2. **结果解读**
   - **绿色（80-100分）**: 代码质量优秀
   - **黄色（60-79分）**: 代码质量良好，有改进空间
   - **红色（0-59分）**: 代码质量需要重点改进

---

## 📖 详细使用

### 🎯 快捷键一览

| 功能 | Windows/Linux | macOS | 描述 |
|------|---------------|-------|------|
| **审查暂存文件** | `Ctrl+Shift+R` | `Cmd+Shift+R` | 审查Git暂存区中的文件 |
| **审查当前文件** | `Ctrl+Shift+F` | `Cmd+Shift+F` | 审查当前编辑器中的文件 |
| **打开工具窗口** | `Ctrl+Shift+P` | `Cmd+Shift+P` | 打开JDC审查工具窗口 |

### 🔧 高级功能

#### 文件过滤机制

插件智能过滤文件类型，只审查代码文件：

**支持的文件类型：**
- Java: `.java`
- Kotlin: `.kt`, `.kts`
- Python: `.py`
- JavaScript: `.js`, `.jsx`
- TypeScript: `.ts`, `.tsx`
- C/C++: `.c`, `.cpp`, `.h`, `.hpp`
- C#: `.cs`
- Go: `.go`
- Rust: `.rs`
- PHP: `.php`
- Ruby: `.rb`
- Swift: `.swift`
- Scala: `.scala`

**自动排除的文件：**
- 配置文件（`.xml`, `.json`, `.yml`等）
- 文档文件（`.md`, `.txt`等）
- 图片和媒体文件
- 编译产物和临时文件

#### 批量审查策略

1. **选择性审查**
   - 在文件选择对话框中精确选择要审查的文件
   - 避免审查不必要的文件，节省时间

2. **分批审查**
   - 对于大型项目，建议分批审查
   - 每次选择相关的文件模块进行审查

3. **增量审查**
   - 只审查本次修改的文件
   - 利用Git暂存区机制实现增量审查

### 📊 审查结果详解

#### 评分标准

| 分数范围 | 质量等级 | 建议操作 |
|----------|----------|----------|
| **90-100分** | 🟢 优秀 | 可以直接提交 |
| **80-89分** | 🟡 良好 | 考虑优化建议后提交 |
| **70-79分** | 🟠 一般 | 建议修复主要问题 |
| **60-69分** | 🔴 较差 | 需要重点改进 |
| **0-59分** | ⚫ 很差 | 必须修复后再提交 |

#### 问题类型

1. **安全问题** 🛡️
   - SQL注入风险
   - XSS漏洞
   - 敏感信息泄露
   - 权限控制问题

2. **性能问题** ⚡
   - 算法复杂度过高
   - 内存泄露风险
   - 数据库查询优化
   - 缓存使用建议

3. **代码风格** 🎨
   - 命名规范
   - 代码格式
   - 注释完整性
   - 代码结构

4. **可维护性** 🔧
   - 代码复杂度
   - 重复代码
   - 设计模式建议
   - 架构优化

---

## 🔧 常见问题

### Q1: 插件无法连接到服务器？

**可能原因：**
- 网络连接问题
- 防火墙阻止访问
- 服务器临时维护

**解决方案：**
1. 检查网络连接是否正常
2. 确认可以访问 `https://www.jdctools.com.cn`
3. 检查公司防火墙设置
4. 稍后重试或联系技术支持

### Q2: 登录失败或认证过期？

**可能原因：**
- 浏览器授权未完成
- 账号未激活
- 认证信息过期

**解决方案：**
1. 确认在浏览器中完成了完整的授权流程
2. 检查JDC Tools账号是否已激活
3. 重新点击登录按钮进行认证
4. 清除浏览器缓存后重试

### Q3: 没有文件可以审查？

**可能原因：**
- 没有文件在Git暂存区
- 暂存的都是非代码文件
- Git仓库未初始化

**解决方案：**
1. 使用 `git add` 命令将文件添加到暂存区
2. 确认添加的是代码文件（.java, .py, .js等）
3. 使用 `git status` 检查暂存区状态
4. 确保项目是Git仓库

### Q4: 审查结果显示异常？

**可能原因：**
- 网络不稳定
- 文件内容为空
- 服务器处理异常

**解决方案：**
1. 检查网络连接稳定性
2. 确认文件内容不为空
3. 重新执行审查
4. 查看IDE日志获取详细错误信息

### Q5: 快捷键不生效？

**可能原因：**
- 与其他插件快捷键冲突
- IDE快捷键设置被修改

**解决方案：**
1. 进入 `文件` → `设置` → `键盘映射`
2. 搜索 "JDC Pre-Commit"
3. 检查快捷键设置
4. 重新分配快捷键或解决冲突

### 📋 日志调试

如果遇到问题，可以查看详细日志：

1. **打开日志文件**
   - `帮助` → `在资源管理器中显示日志`
   - 查找 `idea.log` 文件

2. **搜索关键词**
   - 搜索 "JDC" 或 "PreCommit"
   - 查看错误信息和堆栈跟踪

3. **联系技术支持**
   - 将相关日志发送给技术支持
   - 邮箱：jdctools@163.com

---

## 📞 技术支持

### 联系方式

- **官方网站**: [https://www.jdctools.com.cn](https://www.jdctools.com.cn)
- **技术支持邮箱**: [jdctools@163.com](mailto:jdctools@163.com)
- **插件市场**: [JetBrains Plugin Marketplace](https://plugins.jetbrains.com/)

### 反馈建议

我们欢迎您的反馈和建议：

1. **功能建议** - 告诉我们您希望的新功能
2. **问题反馈** - 报告使用中遇到的问题
3. **使用体验** - 分享您的使用心得

### 获取帮助

报告问题时，请提供以下信息：

- IntelliJ IDEA版本
- 插件版本
- 操作系统信息
- 详细的错误描述
- 相关的日志信息

---

## 🎉 开始使用

现在您已经了解了JDC Pre-Commit Code Review插件的完整使用方法！

**快速开始三步骤：**
1. 🔐 **登录账号** - 点击登录按钮完成认证
2. 📁 **添加文件** - 使用 `git add` 添加要审查的文件
3. 🚀 **开始审查** - 按 `Ctrl+Shift+R` 开始智能代码审查

**让AI帮助您写出更好的代码！** ✨

---

<div align="center">

**🌟 如果这个插件对您有帮助，请在插件市场给我们好评！**

Made with ❤️ by JDC Tools Team

</div>
